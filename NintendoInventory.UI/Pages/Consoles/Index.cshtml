@page
@model NintendoInventory.UI.Pages.Consoles.IndexModel
@{
}
<div id="container" class="d-inline m-auto">
    <div class="col-sm-3">
        <h1 class='title'>Consoles</h1>
    </div>
    <div class="col-sm-3">
        <a id="addButton" class="btn btn-primary" asp-page="Add">Add Console</a>
    </div>
</div>

<div class="row m-4">
    @foreach (var Console in Model.ConsoleList)
    {

        var URL = @Console.ConsoleImageURL;
        <div id="consoleDiv" class="col-md-2 ">
            <div>
                <div id="consButtons">
                    <a asp-page="delete" asp-route-id="@Console.ConsoleID" onclick="return confirm('Are you sure you want to delete?')" id="consDelBtn" class="btn btn-primary rounded-circle align-items-center justify-content-center">
                        <i class="bi bi-x-lg"></i>
                    </a>
                    <Button id="ATWLbtn" onclick="addConsoleToWL(@Console.ConsoleName)" class="btn btn-primary rounded-circle align-items-center justify-content-center ">
                        <i class="bi bi-plus-lg"></i>
                    </Button>

                </div>
                <div id="consImgDiv" class="overflow-auto">
                    <img class="image" src=@URL>
                </div>
                <div id="consBotRow">
                    <div class="row">
                        <div id="consoleName" class="col-sm-12">
                            @Console.ConsoleName
                        </div>
                    </div>
                    <!--<div class="row">
                        <div id="releaseDate" class="col-sm-12">
                             Console.ReleaseDate
                        </div>
                    </div>-->
                    <div class="row">
                        <div id="consPrice" class="col-sm-12">
                            $@Console.Price
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
    <!-- The Modal -->
    <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
            <h5 class="fw-bold">Are you sure you want to delete?</h5>
            <p> This action cannot be undone.</p>
            <div id="modalButtons">
                <a id="confirmBtn" class="btn btn-primary">Confirm</a>
                <a id="cancelBtn" class="btn btn-secondary">Cancel</a>
            </div>
        </div>

    </div>
    <script>
        function addConsoleToWL(ConsoleName) {
            document.getElementById("ATWLbtn").style.visibility = "hidden";
            print(ConsoleName);
        }

        // Get the modal
        var modal = document.getElementById("myModal");

        // Get the button that opens the modal
        var deleteBtn = document.getElementById("consDelBtn");
       // var ConsoleId = deleteBtn.getAttribute("asp-route-id")
        // Get the <span> element that closes the modal
        var cancelBtn = document.getElementById("cancelBtn");
        var confirmBtn = document.getElementById("confirmBtn");
        //confirmBtn.setAttribute("asp-route-id", ConsoleId);
        // When the user clicks on the button, open the modal
        //deleteBtn.onclick = function () {
        //    modal.style.display = "block";
        //    return customConfirm
        //}

       // function customConfirm() {
        //    return new Promise((resolve) => {
          //      modal.style.display = "block";
         //       confirmBtn.addEventListener('click', () => {
          //          modal.style.display = "none";
        //            resolve(true);
         //       });
        //        cancelBtn.addEventListener('click', () => {
         //           modal.style.display = "none";
        //            resolve(false);
        //        });
       //     });
       // }

        // When the user clicks on <span> (x), close the modal
        cancelBtn.onclick = function () {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
</div>